# 도커 컴포즈 공부

- 이전 프로젝트 도커 활용법
	- 모든 애플리케이션을 개별 컨테이너로 관리
	- 새로 배포를 진행할 시
		- 컨테이너를 죽이지 않음
		- exec을 통해 내부에 명령을 가하는 방식
	- 문제점
		- 이미지를 통한 버전 관리가 되지 않음
			- 필수 사항은 아님
			- 현재의 백엔드에서 롤백을 해야 하는 상황이 있을 때 이를 진행하기 위해서 깃을 다시 돌리는 방법 밖에 없음
			- 차라리 이전 버전의 컨테이너가 존재했다면 조금 더 관리가 편했을 듯
		- 젠킨스 파이프라인
			- `docker exec`을 일일히 치는 것이 매우 불편함
			- 그래서 쉘 스크립트를 짰음
			- 그러나 스크립트로 앱을 구동할 시 앱이 실행된 이후로 파이프라인이 계속 실행 상태가 됨
				- 백그라운도 실행되게 하여 해결함
				- 그러나 이는 서버에 문제가 생겨도 젠킨스로 추적이 불가능하게 만듬
				- 문제 인식을 느리게 만들고 빠른 대처가 힘들었음
		- 컨테이너 세팅하는 스크립트, 앱 실행 스크립트가 따로 존재
			- 오직 초기를 위한 스크립트가 따로 존재하는 방식

저번 프로젝트에서의 배포 전략은 이러한 문제가 있었다.
도커파일을 활용하는 방법이 있다는 것은 알고 있었지만, 필요성을 느끼지 못했었고 이번 프로젝트에서는 버전 관리를 명확히 할 수 있는 도커 파일을 활용할 생각이다. 그리고 컨테이너 관리를 도와주는 도커 컴포즈까지 활용할 것이다. 