# 느징스 리버스 프록시 바로 세우기
![[Pasted image 20240312230039.png]]
프록시 패스가 제대로 동작하고 있는 것인지 조금 더 확인이 필요해 보인다.
계속 404가 뜨는 것이 아무래도 제대로 프록시 패스를 못하고 있는 것으로 보인다.

확인을 해보니 프록시 패스를 진행할 때 직접 주소를 입력하는 것과 변수를 통해 입력하는 것에 차이가 있었다.
바로 입력할 때는 문제없이 작동하는데, 이걸 직접 변수로 등록하고 하면 제대로 이뤄지지 않았다.
프록시 패스 경로를 기입할 때 크게 세 가지 정도의 방법이 있는 것으로 보였다.
- 직접 주소 입력하기
- upstream에 주소 입력하기
- 변수에 주소 입력하기
upstream을 사용할 때 upstream의 이름을 변수로 입력하는 것은 또 잘 작동하는 것으로 보인다.

참고로 로컬호스트는 제대로 동작하지 않는다.
이는 도커 컨테이너를 사용하기 때문에 발생하는 문제로, `172.17.0.1`를 사용하면 해결된다.
https://narup.tistory.com/236
근데 이걸 적용하고 나니 위에서 생각했던 변수 문제가 해결됐다..

젠킨스 컨테이너는 진작에 띄워둔 상태였는데, 이 놈도 그렇다면 느징스를 거칠 수 있겠다고 판단해서 진행을 해보았으나 뜻대로 되지 않는다.
그냥 404를 띄우는 것이 꼭 제대로 프록시 패스가 적용되지 않을 때의 모습같다.
https://stackoverflow.com/questions/16997112/nginx-proxy-pass-with-variables-and-redirect
이런 문제도 있따.
https://bitgadak.tistory.com/7

건드리다 보면 젠킨스도 https로 통신할 수 있게 할 수 있을 것 같기는 한데, 이것도 우선순위를 조금 미뤄둘 필요가 있다.