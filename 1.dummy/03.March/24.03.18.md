# 배포 파일 작성
![[Pasted image 20240318095623.png]]
도커 컴포즈로 현재 떠 있는 컨테이너를 확인하여 블루를 지정한다.

헬스체크는 총 두번을 거쳐서 한다. 컴포즈를 통해 도커 파일에 지정된 헬스체크를 발동시킨다. 이게 가장 근본적인 헬스체크.

마지막은 느징스 상에서 이뤄진다.

파이썬 서버를 gpu에 올려도 될 듯하다. 그러면 ec2의 부담이 줄어들 것이다. 모델이 돌아가는 서버는 확실히 따로 두는 게 메리트가 있다. 
대신에 시간이 많지 않으므로 파이썬 서버의 무중단 배포는 과감히 포기한다.

무중단 배포 성공!
![[Pasted image 20240318152934.png]]
이런 식으로 짜서, 무중단 배포가 되는 것을 확인했다.