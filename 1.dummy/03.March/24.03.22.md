# 오늘 할 일
- 개인 ssh 연결  가능하게 세팅하기
	- 각각의 ip주소를 알아야 하고, pub파일을 받아야 한다.
	-  pem파일을 받아야 하나??
- front 이슈 확인하기
	- 서비스 워커가 제대로 실행되지 않는 이슈 존재
	- 느징스 딴에서 설정해주는 게 필요하다고 함.
- 소나큐브 적용
	- 알아만 보기
	- sonarqube.ssafy.com이 있는데 이게 무엇인지 궁금핟
	- 이걸 적용할 여지가 있는가?
# 프론트 이슈 해결하기
## 첫번째 문제
프론트 pwa가 제대로 적용되지 않는 문제부터.
현재 우리 서버는 느징스를 띄우고 이 서버가 웹 서버 역할을 한다.
프록시 서버 느징스와 프론트 느징스.
프론트 느징스에서 문제가 발생하길래 느징스 설정파일을 건드리면서 추가적으로 알아보니, pwa는 https환경에서 작동한다고 했다. 
그래서 고민하다가 프록시 서버를 그 자체로 웹 서버로 활용하는 방안을 구상했다.
굳이 두 개의 느징스 서버가 띄워질 필요는 없다고 판단한 것이다. 어차피 정적파일만 던져주는데 뭐 얼마나 문제가 생기겠나, 싶었다.
그런데 막상 해보니까, 제대로 정적 파일을 못 던져주고 있다.

해결하기 위해 시도한 것은 다음과 같다.
- default_server를 443으로 변경
- /로케이션 블럭의 위치를 최하단으로 배치
아마 이것 중에서 해결된 것이 아닐까 한다. 확실하지는 않다.
## 두번째 문제
![[Pasted image 20240322105023.png]]
다음은 이 문제이다.
https://stackoverflow.com/questions/49566059/service-worker-registration-error-unsupported-mime-type-text-html?newreg=14c5570bc104463f913143c801cb99e0
이건 느징스 단에서 해결해야하는 이슈일 수도 있을 것 같다. 

![[Pasted image 20240322105725.png]]
이런 식으로 해서 서비스 워커에 접근할 때 느징스에서 설정을 해줄 수 있도록 한다. 

![[Pasted image 20240322105702.png]]
새로운 문제 발생!
오 ㅋㅋ

# 파이썬 서버 다루기
![[Pasted image 20240322125927.png]]
점점 알면 안 되는 영역에 다가가는 느낌. 아무튼..
gpu  서버에 파이썬 서버를 띄우고 운용할 수 있을 것이라 생각했다. 근데 포트가 일단 다 막혀있다. 
ssh 연결도 막혀있다. 그렇다면 어떻게 이 서버와 다른 서버가 통신할 수 있을까?

ㅋㅋㅋ
생각한 방법
1. 포트를 연다
	1. 이건 정말 말도 안 된다. 어느 미친 서버가 클라 맘대로 포트를 열어주냐?
	2. iptable, ufw 전부 불가능이다.
2. ssh를 사용해서 내부의 스크립트를 실행시키거나, 내부에서 curl을 날려서 파이썬 서버에 접촉한다.
	1. 문서를 보니까 ssh를 막아뒀다고 한다.
	2. 실제로도 게이트웨이를 세우고 있는 모양인데, 어떤 주소로 접속을 해야 하는지 알 수 없다.
3. 깃에다 내가 원하는 값을 올리고, 크론탭으로 매번 불러와서 실행해본다
	1. 크론탭은 보니까 사용이 가능한 것으로 보인다. 
	2. 24시간마다 프로세스가 종료된다고는 하는데, 크론탭은 내가 직접 실행만 시켜주면 되는 거 아니겠냐
4. 브라우저를 통해 터미널을 사용한다.
	1. 셀레니움? 크롤링을 하는데 활용하는 툴을 이용해 브라우저를 조작한다.
	2. 터미널을 브라우저로는 접근이 가능하니까 이런 방법은 사용 가능할 수도 있다.
	3. 근데 터미널은 실시간으로 입력을 받는 것 같으니 아무래도 웹 소켓을 활용하는 게 아닐까 하는데, 이것에 대해서도 조작을 할 수 있나?
사실 4번은 진짜 너무 돌아가는 것이라 생각한다. 브라우저를 거쳐서 하는 것은 진짜 최후의 방법이 아닐까.
일단 3번부터.
## 도전
![[Pasted image 20240322133850.png]]
일단 크론탭은 충분히 가능했다.
![[Pasted image 20240322133951.png]]
보다시피, 1분마다 ls가 실행되고 그 값이 로그로 쌓이는 중이다.
그렇다면 스크립트 파일로 잘 내가 원하는 명령어를 실행만 하면 되는 것이다. 

gpu서버로 ssh를 연결하는 것은 불가능하다.
그렇지만 gpu서버가 ssh를 쓰는 것도 불가능할까?
