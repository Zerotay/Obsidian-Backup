# 컨테이너 jvm 인증서 등록하기
[[24.03.27#서버 간 통신 문제 - PIKX]]
어제 결국 마치지 못했다.

로그인이나 다른 api는 작동하지만 이 요청에 대해서만 문제가 발생한다.
로컬에서 띄웠을 때와는 다르게 postman에서 500만 뜨고 아무런 데이터가 오지 않는다.
그리고 서버에서도 별다른 에러가 발생하지 않는다.
![[Pasted image 20240328105811.png]]
계속 포스트맨을 보다보니 이런 에러가 보였다.
이것이 문제일 가능성이 있다.
어째서 스프링 로그에 아무런 출력이 걸리지 않는 것인지는 잘 모르겠다. 

음.  해결은 일단 했다.
![[Pasted image 20240328111704.png]]
어째서 스프링에 아무런 로그가 찍히지 않는지는 확인하지 못 했다.
오히려 스프링 측에서는 데이터를 잘 처리한 것으로 보이기까지 했다. 
위의 unable to verifay the first certificate는 포스트맨에서 서버의 인증서가 불안하다고 말하는 이슈인 듯하다.
즉, 내 알 바는 아니라는 것이다. 
실제 서비스 중에는 사용하는 브라우저에서만 ca 인증서 등록이 되어 있으면 된다.
![[Pasted image 20240328112105.png]]
코드는 이렇게 된다.
cacerts 옵션을 사용하면 키스토어 위치를 내가 지정할 필요가 없다. 기본값을 사용하겠다는 뜻이다. 

다른 백엔드 팀원 세팅을 도와주면서 액세스 거부 문제도 해결했는데, 윈도우의 경우 숨김 파일일 시 가지는 접근 권한의 이슈가 존재하는 모양이다. 
이것도 해결했다.
조금씩 머리가 굵어지는 느낌이 든다.

결국 핵심은, 키스토어에 cert 파일을 등록하는 것. 내 맘대로 갖다 박고 싶지만 그것이 잘 되지 않기에 keytool을 활용한다. 

